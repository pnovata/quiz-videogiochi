<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Game Quiz - Studenti</title>
    <style>
        :root {
            --color-primary: #2180a0;
            --color-primary-hover: #1d7488;
            --color-success: #22c55e;
            --color-error: #ef4444;
            --color-bg: #f5f5f5;
            --color-surface: #ffffff;
            --color-text: #1f2121;
            --color-text-secondary: #626c7c;
            --color-border: #e5e7eb;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --radius-md: 8px;
            --duration-normal: 250ms;
        }
        * { box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: var(--space-20);
            background-color: var(--color-bg);
            color: var(--color-text);
            line-height: 1.6;
        }
        .container { max-width: 800px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: var(--space-24); }
        h1 { margin: 0 0 var(--space-20) 0; font-size: 28px; color: var(--color-text); }
        .login-section { display: flex; gap: var(--space-16); justify-content: center; margin-bottom: var(--space-24); flex-wrap: wrap; background-color: var(--color-surface); padding: var(--space-20); border-radius: var(--radius-md); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); }
        .form-group { display: flex; flex-direction: column; gap: var(--space-8); }
        .form-label { font-weight: 600; font-size: 14px; color: var(--color-text); }
        .form-input { padding: var(--space-12); border: 2px solid var(--color-border); border-radius: var(--radius-md); font-size: 16px; font-family: inherit; min-width: 200px; }
        .form-input:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(33, 128, 160, 0.1); }
        .btn { padding: var(--space-12) var(--space-20); border: none; border-radius: var(--radius-md); font-size: 16px; font-weight: 600; cursor: pointer; transition: all var(--duration-normal); }
        .btn--primary { background-color: var(--color-primary); color: #ffffff; }
        .btn--primary:hover { background-color: var(--color-primary-hover); }
        .btn--secondary { background-color: var(--color-border); color: var(--color-text); }
        .btn--secondary:hover { background-color: #d1d5db; }
        .error-message { color: var(--color-error); font-size: 14px; padding: var(--space-12); background-color: #fef2f2; border: 1px solid #fecaca; border-radius: var(--radius-md); margin-bottom: var(--space-16); display: none; }
        .error-message.show { display: block; }
        .quiz-section { display: none; }
        .quiz-section.active { display: block; }
        .question { background-color: var(--color-surface); padding: var(--space-20); border-radius: var(--radius-md); margin-bottom: var(--space-20); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); }
        .question-title { font-weight: 600; font-size: 16px; margin-bottom: var(--space-16); color: var(--color-text); }
        .options { display: flex; flex-direction: column; gap: var(--space-12); }
        .option { display: flex; align-items: center; gap: var(--space-12); }
        .option input[type="radio"] { cursor: pointer; width: 18px; height: 18px; }
        .option label { cursor: pointer; flex: 1; }
        .progress-bar { width: 100%; height: 8px; background-color: var(--color-border); border-radius: 4px; margin-bottom: var(--space-20); overflow: hidden; }
        .progress-fill { height: 100%; background-color: var(--color-primary); transition: width 0.3s; }
        .button-group { display: flex; gap: var(--space-12); justify-content: center; margin-top: var(--space-20); }
        .result-screen { display: none; text-align: center; padding: var(--space-24); background-color: var(--color-surface); border-radius: var(--radius-md); }
        .result-screen.active { display: block; }
        .result-score { font-size: 48px; font-weight: 700; color: var(--color-primary); margin: var(--space-20) 0; }
        .result-percentage { font-size: 24px; color: var(--color-text-secondary); margin-bottom: var(--space-20); }
        .result-message { font-size: 18px; margin-bottom: var(--space-20); }
        .success { color: var(--color-success); }
        .warning { color: var(--color-error); }
        .loading { text-align: center; padding: var(--space-24); }
        .spinner { display: inline-block; width: 40px; height: 40px; border: 4px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .button-group-results { display: flex; gap: var(--space-12); justify-content: center; margin-top: var(--space-20); flex-wrap: wrap; }
    </style>
<script type="text/javascript" nonce="26b5992741b941f68a1db6c6bd3" src="//injections.adguard.org?ts=1764257605926&amp;type=content-script&amp;dmn=ppl-ai-code-interpreter-files.s3.amazonaws.com&amp;url=https%3A%2F%2Fppl-ai-code-interpreter-files.s3.amazonaws.com%2Fweb%2Fdirect-files%2F556ed5b0ca1a2be022b9957d0aef671c%2Faef52d18-6a85-49b8-9fe7-fa8a096c4eae%2F1722e241.html%3Fresponse-content-disposition%3Dattachment%253B%2520filename%253Dquiz_LOCALSTORAGE.html%253B%2520filename%252A%253DUTF-8%2527%2527quiz_LOCALSTORAGE.html%26AWSAccessKeyId%3DASIA2F3EMEYE3IDGXYVJ%26Signature%3Dx8pixEqeO5EQTrrZDAkLgiFoFYg%253D%26x-amz-security-token%3DIQoJb3JpZ2luX2VjENj%252F%252F%252F%252F%252F%252F%252F%252F%252F%252FwEaCXVzLWVhc3QtMSJHMEUCIQC3P%252BJeozzIqann4gFe38HoJZDhzcUOi2%252Bti%252BW51krZOgIgUrrs0iiqEg6uSH4to342l%252FnNPx%252FQ6lnLyOr%252Fg%252BlP5x8q%252FAQIoP%252F%252F%252F%252F%252F%252F%252F%252F%252F%252FARABGgw2OTk3NTMzMDk3MDUiDEeheBH9jiXJ6HevsCrQBIDfpPjOdaXbc3zGmKIPUhgcCumupPrqBxPCdDV0x9NtpKakOL1ERyGwrNsQoNj4yN%252F7nHhq0Ndsf9HPm4HtEcz9UXCZ3O0n4xoX9vpTSEzdjJpokylSMOBL%252BM57FQKosJxKMN93hTArEAdmi6RvlXVX6mg7%252Fr2zLh0K16YJErJ%252BwGcsHgB2s7rVhZxM3ZqNCVhWKAPXBLp4sj48BDLHis3KMoA3GchR7nmrKASWEJh9Oexx%252BG7K2fEKqRniEOyqqgsY4lQVmHyS%252FqFz9If5xeHa33blioup4JMPVJrl2D5N6wWjozfWR9ZdKKYgUhgpr3p70zKW%252B1MgHIMf6yijZyU1dN3zOV4h%252FXsXtzAkrokI5KyFR%252F3%252FaWRvShpY7gtJE7Fw9HHVXYKsM9NzMm2Yd8r3Or3g1k%252BHDb9e6lvtVB2mRjwfo0ZjuV2zkHYrZMrIpHirlSCj9Cq%252BTmE0jUf7oiecpVjwUazuapa1vPutCrN8arhrQ0Tzt4mDvBDEy9GzuvdPxWGxKcgbsd2eiBqPcNrQxcPspMOImsfa%252BT4b5TORcF%252BvycaLDwHm%252FuowktDQgMpJvvuX7piQn6kUHY9qaUtqsPw3iV%252FGuub10ESt9%252BLxnc2%252BmAdih7IL7%252BPgynIfGRJ7juplXv8rS3P4Hjr8dj2AYzvVoC2iM5yzsBj0%252BKAIJTzRAsCbWxP3ggjH2mx5J4ezdnazYujSsNTjRM5ds%252BNsUMdwE2ONrShoKpBpo6uEZzSPUS6U4xnEwCFoKa0hH89kpYb%252B8QIniRtkeaD5vd4wh9ahyQY6mAGgwVh%252F0%252BtHVtK4QAmb%252FUnQ%252BBB01zCdRAj1PmYk%252BJpfEY7X9Up5%252FAtWMP9P4PBi%252Fe6P6IG6mrD40NOKTqm3pp1oUkpHqO3RB4NrzLZQzb%252BLPyhHIFU2L7%252B8dwpiF9Gw8crvRdw%252BDMKVtjiHXb4cGknDMaZJhQ77F5eQCY%252FGcgz%252Bs0iOszy1cn8NomV%252BnVPTQQnji6%252FlXpb75A%253D%253D%26Expires%3D1764258523&amp;app=chrome.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1&amp;stealth=1&amp;st-dnt"></script><script type="text/javascript" nonce="26b5992741b941f68a1db6c6bd3" src="//injections.adguard.org?ts=1764257605926&amp;name=AdGuard%20Assistant&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script></head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ Video Game Quiz</h1>
        </div>

        <!-- LOGIN SECTION -->
        <div class="login-section" id="loginSection">
            <div class="form-group">
                <label class="form-label">üë§ Nome</label>
                <input type="text" id="nameInput" class="form-input" placeholder="Inserisci il tuo nome">
            </div>
            <div style="display: flex; align-items: flex-end;">
                <button class="btn btn--primary" onclick="startQuiz()">Inizia Quiz</button>
            </div>
            <div class="error-message" id="errorMessage">Inserisci il tuo nome!</div>
        </div>

        <!-- QUIZ SECTION -->
        <div class="quiz-section" id="quizSection">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div id="questionContainer"></div>
            <div class="button-group">
                <button class="btn btn--secondary" onclick="previousQuestion()" id="prevBtn">‚Üê Indietro</button>
                <button class="btn btn--primary" onclick="nextQuestion()" id="nextBtn">Avanti ‚Üí</button>
            </div>
        </div>

        <!-- RESULT SECTION -->
        <div class="result-screen" id="resultScreen">
            <h2>Quiz Completato! ‚úÖ</h2>
            <div class="result-score" id="resultScore">0/10</div>
            <div class="result-percentage" id="resultPercentage">0%</div>
            <div class="result-message" id="resultMessage"></div>
            <div style="margin-top: var(--space-24);">
                <div id="loadingIndicator" class="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Risultato salvato nel browser! ‚úÖ</p>
                </div>
                <div class="button-group-results" style="display: none;" id="resultButtons">
                    <button class="btn btn--primary" onclick="location.reload()">Riprova</button>
                    <button class="btn btn--secondary" onclick="downloadCSV()">üì• Scarica CSV</button>
                    <button class="btn btn--secondary" onclick="viewAllResults()">üìä Visualizza Risultati</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ‚úÖ CONFIGURAZIONE - LocalStorage (niente server needed!)
        const STORAGE_KEY = 'quiz_results';

        // DOMANDE DEL QUIZ
        const questions = [
            {
                question: "Qual √® il miglior gioco di ruolo di sempre?",
                options: ["The Witcher 3", "Baldur's Gate 3", "Final Fantasy VII", "Dark Souls"],
                correct: 1
            },
            {
                question: "Quale console ha venduto pi√π unit√†?",
                options: ["PlayStation 2", "Nintendo Wii", "Nintendo DS", "PlayStation 4"],
                correct: 0
            },
            {
                question: "Chi ha creato Mario?",
                options: ["Hideo Kojima", "Shigeru Miyamoto", "Yoichi Miyaji", "Satoru Iwata"],
                correct: 1
            },
            {
                question: "In che anno √® uscito The Legend of Zelda?",
                options: ["1985", "1986", "1987", "1988"],
                correct: 0
            },
            {
                question: "Quale √® il videogioco pi√π venduto di sempre?",
                options: ["Minecraft", "Tetris", "Wii Sports", "Grand Theft Auto V"],
                correct: 0
            },
            {
                question: "Quanti controller aveva il Nintendo 64?",
                options: ["2", "3", "4", "1"],
                correct: 2
            },
            {
                question: "Chi ha sviluppato Fortnite?",
                options: ["Riot Games", "Epic Games", "Activision", "Rockstar Games"],
                correct: 1
            },
            {
                question: "In che anno √® uscito il primo Pokemon?",
                options: ["1994", "1996", "1998", "2000"],
                correct: 1
            },
            {
                question: "Quale gioco ha il miglior gameplay secondo i criteri moderni?",
                options: ["Elden Ring", "Zelda: Breath of the Wild", "Red Dead 2", "Half-Life 2"],
                correct: 1
            },
            {
                question: "Quanti Souls-like ha creato FromSoftware?",
                options: ["4", "5", "6+", "3"],
                correct: 2
            }
        ];

        // VARIABILI GLOBALI
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let studentName = '';

        // FUNZIONI
        function startQuiz() {
            studentName = document.getElementById('nameInput').value.trim();
            if (!studentName) {
                document.getElementById('errorMessage').classList.add('show');
                return;
            }
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('quizSection').classList.add('active');
            renderQuestion();
        }

        function renderQuestion() {
            const question = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            let html = `
                <div class="question">
                    <div class="question-title">${currentQuestion + 1}. ${question.question}</div>
                    <div class="options">
            `;

            question.options.forEach((option, idx) => {
                const isChecked = answers[currentQuestion] === idx ? 'checked' : '';
                html += `
                    <div class="option">
                        <input type="radio" name="answer" id="opt${idx}" value="${idx}" ${isChecked} onchange="answers[${currentQuestion}] = ${idx}">
                        <label for="opt${idx}">${option}</label>
                    </div>
                `;
            });

            html += `</div></div>`;
            document.getElementById('questionContainer').innerHTML = html;

            // Aggiorna bottoni
            document.getElementById('prevBtn').style.display = currentQuestion === 0 ? 'none' : 'block';
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'Fine Quiz ‚úì' : 'Avanti ‚Üí';
            document.getElementById('nextBtn').onclick = currentQuestion === questions.length - 1 ? finishQuiz : nextQuestion;
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }

        function finishQuiz() {
            const score = answers.reduce((acc, ans, idx) => {
                return acc + (ans === questions[idx].correct ? 1 : 0);
            }, 0);

            const percentage = Math.round((score / questions.length) * 100);

            document.getElementById('quizSection').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            document.getElementById('resultScore').textContent = `${score}/${questions.length}`;
            document.getElementById('resultPercentage').textContent = `${percentage}%`;

            if (percentage >= 70) {
                document.getElementById('resultMessage').innerHTML = `<span class="success">Ottimo! Hai superato il quiz! üéâ</span>`;
            } else if (percentage >= 50) {
                document.getElementById('resultMessage').innerHTML = `<span class="warning">Hai passato il quiz, ma puoi fare di meglio! üí™</span>`;
            } else {
                document.getElementById('resultMessage').innerHTML = `<span class="warning">Devi studiare di pi√π! Riprova! üìö</span>`;
            }

            // Salva i dati
            saveResults(score, percentage);
        }

        function saveResults(score, percentage) {
            document.getElementById('loadingIndicator').style.display = 'block';

            const today = new Date().toLocaleDateString('it-IT');
            
            const result = {
                nome: studentName,
                punteggio: score,
                percentuale: percentage,
                data: today,
                timestamp: new Date().toISOString()
            };

            // Leggi i risultati precedenti
            let results = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            
            // Aggiungi il nuovo risultato
            results.push(result);
            
            // Salva nel LocalStorage
            localStorage.setItem(STORAGE_KEY, JSON.stringify(results));

            console.log('‚úÖ Risultato salvato nel browser!', result);
            
            setTimeout(() => {
                document.getElementById('loadingIndicator').style.display = 'none';
                document.getElementById('resultButtons').style.display = 'flex';
            }, 1000);
        }

        function downloadCSV() {
            const results = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            
            if (results.length === 0) {
                alert('Nessun risultato da scaricare!');
                return;
            }

            // Crea header CSV
            let csv = 'Nome,Punteggio,Percentuale,Data\n';
            
            // Aggiungi righe
            results.forEach(r => {
                csv += `${r.nome},${r.punteggio},${r.percentuale}%,${r.data}\n`;
            });

            // Scarica il file
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `quiz_risultati_${new Date().getTime()}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function viewAllResults() {
            const results = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
            
            if (results.length === 0) {
                alert('Nessun risultato salvato!');
                return;
            }

            let message = 'üìä RISULTATI QUIZ:\n\n';
            results.forEach((r, idx) => {
                message += `${idx + 1}. ${r.nome} - ${r.punteggio}/10 (${r.percentuale}%) - ${r.data}\n`;
            });

            alert(message);
        }

        console.log('‚úÖ Quiz pronto! - LocalStorage configurato (niente server!)');
    </script>
</body>
</html>
